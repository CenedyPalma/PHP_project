runtime = "php@8.2"

[phases.setup]
aptPkgs = ["...", "php8.2-mysql", "php8.2-pdo", "php8.2-xml", "php8.2-mbstring", "php8.2-intl"]

[phases.build]
cmds = [
    "composer install --no-dev --optimize-autoloader",
    "php bin/console cache:clear --env=prod --no-debug || true",
    "php bin/console cache:warmup --env=prod --no-debug || true"
]

[start]
cmd = "php bin/console doctrine:schema:update --force --env=prod && php -S 0.0.0.0:${PORT:-8080} -t public"
